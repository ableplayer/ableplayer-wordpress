(()=>{jQuery(document).ready(function(t){let b=window.location.hash,f=document.querySelectorAll(".ableplayer-tabs");for(let e=0;e<f.length;e++)t(f[e]).find(b).length!==0?h(b):(b=t(f[e]).find("[role=tablist]").attr("data-default"),h("#"+b));let g=document.querySelectorAll(".ableplayer-tabs [role=tab]");for(let e=0;e<g.length;e++)g[e].addEventListener("click",k),g[e].addEventListener("keydown",A);function k(e){let o=t(e.currentTarget).closest(".tabs").find("[role=tab]"),s=t(e.currentTarget).closest(".ableplayer-tabs"),l=t(e.currentTarget).parents(".inside"),u=e.target.getAttribute("aria-controls"),n=t("iframe.mc-iframe"),c=[];l.length==0&&!s.hasClass("mcs-tabs")?c=s.find(".ui-sortable > [role=tabpanel]"):c=s.find("[role=tabpanel]");for(let r=0;r<o.length;r++)o[r].setAttribute("aria-selected","false");e.target.setAttribute("aria-selected","true");for(let r=0;r<c.length;r++)c[r].setAttribute("aria-hidden","true");l.length==0&&(window.location.hash=u),document.getElementById(u).setAttribute("aria-hidden","false");for(let r=0;r<n.length;r++){let p=n[r];resizeIframe(p)}t("#"+u).attr("tabindex","-1").trigger("focus"),window.scrollTo(0,0)}function h(e){let a=e.replace("#",""),o=t("button[aria-controls="+a+"]"),l=t(e).closest(".tabs").find("[role=tab]"),n=t(e).closest(".ableplayer-tabs").find("[role=tabpanel]"),c=document.getElementById(a);for(let r=0;r<l.length;r++)l[r].setAttribute("aria-selected","false");o.attr("aria-selected","true");for(let r=0;r<n.length;r++)n[r].setAttribute("aria-hidden","true");c!==null&&c.setAttribute("aria-hidden","false")}function A(e){e.keyCode==37&&(t(e.currentTarget).prev().trigger("click").trigger("focus"),e.preventDefault()),e.keyCode==38&&(t(e.currentTarget).prev().trigger("click").trigger("focus"),e.preventDefault()),e.keyCode==39&&(t(e.currentTarget).next().trigger("click").trigger("focus"),e.preventDefault()),e.keyCode==40&&(t(e.currentTarget).next().trigger("click").trigger("focus"),e.preventDefault())}new ClipboardJS(".ableplayer-copy-to-clipboard").on("success",function(e){let o=e.trigger.parentNode.querySelector(".ableplayer-notice-copied"),s=o.textContent;wp.a11y.speak(s),o.classList.add("visible")});let y=document.querySelectorAll(".reset-ableplayer");y!==null&&y.forEach(e=>{e.addEventListener("click",a);function a(o){let s=o.target,l=document.querySelectorAll(".ableplayer-generator-inputs input, .ableplayer-generator-inputs select");for(i=0;i<l.length;i++)switch(l[i].type){case"select-multiple":case"select-one":l[i].value=l[i].querySelector("option:first-of-type").getAttribute("value");break;case"text":case"email":case"date":case"url":case"search":case"textarea":l[i].value="";break;case"checkbox":case"radio":l[i].checked=!1;break}document.querySelectorAll(".ableplayer-shortcode-container").forEach(n=>{n.value="["+s.getAttribute("data-type")+"]"})}}),t(".media-sources").hide();let m=t("#source_type").val();t(".media-sources."+m).show(),t(".media-sources."+m).find("input").attr("required","true"),t("#source_type").on("change",function(e){let a=t(this).val();t(".media-sources").hide(),t(".media-sources").find("input").removeAttr("required"),t(".media-sources."+a).show(),t(".media-sources."+a).find("input").attr("required","true")});var d="";function C(){typeof d!="string"&&(d.detach(),d="")}t(".ableplayer-remove-preview").on("click",function(e){let a=t(this).data("input"),o=t(this).parent().parent(".ableplayer-media-preview");t("#"+a).val(""),t(".preview-"+a+" > *").remove(),o.removeClass("has-value"),wp.a11y.speak(ableplayer.removed)}),t(".upload-ableplayer-media").on("click",function(e){let a=t(this).data("input"),o=document.querySelector('input[name="'+a+'"]'),s=document.querySelector(".preview-"+a),l=t(this).parent().parent(".ableplayer-media-preview");console.log(l);let u;a==="media-id"?u=["audio","video"]:a==="poster"?u=["image"]:u=["text/vtt"],C(),d=wp.media({multiple:!1,title:ableplayer[a+"Title"],library:{type:u},button:{text:ableplayer.buttonName}}),d.on("select",function(){let n=d.state().get("selection"),c="",r="",p="",v="",w="";n&&(c=n.first().attributes.id,a==="poster"?(p=ableplayer.thumbHeight,v=Math.round(n.first().attributes.width/n.first().attributes.height*p),w=n.first().attributes.alt,r="<img id='event_image' src='"+n.first().attributes.url+"' width='"+v+"' height='"+p+"' alt='"+w+"' />",o.value=c,s.innerHTML=r):(s.innerHTML="<pre>"+n.first().attributes.url.replace(ableplayer.homeUrl,"")+"</pre>",o.value=c),l.addClass("has-value"))}),d.open()})});})();
