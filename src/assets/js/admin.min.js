(()=>{jQuery(document).ready(function(t){let b=window.location.hash,f=document.querySelectorAll(".ableplayer-tabs");for(let e=0;e<f.length;e++)t(f[e]).find(b).length!==0?g(b):(b=t(f[e]).find("[role=tablist]").attr("data-default"),g("#"+b));let y=document.querySelectorAll(".ableplayer-tabs [role=tab]");for(let e=0;e<y.length;e++)y[e].addEventListener("click",w),y[e].addEventListener("keydown",C);function w(e){let n=t(e.currentTarget).closest(".tabs").find("[role=tab]"),s=t(e.currentTarget).closest(".ableplayer-tabs"),o=t(e.currentTarget).parents(".inside"),u=e.target.getAttribute("aria-controls"),l=t("iframe.mc-iframe"),c=[];o.length==0&&!s.hasClass("mcs-tabs")?c=s.find(".ui-sortable > [role=tabpanel]"):c=s.find("[role=tabpanel]");for(let a=0;a<n.length;a++)n[a].setAttribute("aria-selected","false");e.target.setAttribute("aria-selected","true");for(let a=0;a<c.length;a++)c[a].style.display="none";o.length==0&&history.pushState(null,null,"#"+u),document.getElementById(u).style.display="block";for(let a=0;a<l.length;a++){let p=l[a];resizeIframe(p)}t("#"+u).attr("tabindex","-1").trigger("focus")}function g(e){let r=e.replace("#",""),n=t("button[aria-controls="+r+"]"),o=t(e).closest(".tabs").find("[role=tab]"),l=t(e).closest(".ableplayer-tabs").find("[role=tabpanel]"),c=document.getElementById(r);for(let a=0;a<o.length;a++)o[a].setAttribute("aria-selected","false");n.attr("aria-selected","true");for(let a=0;a<l.length;a++)l[a].style.display="none";c!==null&&(c.style.display="block")}function C(e){e.keyCode==37&&(t(e.currentTarget).prev().trigger("click").trigger("focus"),e.preventDefault()),e.keyCode==38&&(t(e.currentTarget).prev().trigger("click").trigger("focus"),e.preventDefault()),e.keyCode==39&&(t(e.currentTarget).next().trigger("click").trigger("focus"),e.preventDefault()),e.keyCode==40&&(t(e.currentTarget).next().trigger("click").trigger("focus"),e.preventDefault())}new ClipboardJS(".ableplayer-copy-to-clipboard").on("success",function(e){let n=e.trigger.parentNode.querySelector(".ableplayer-notice-copied"),s=n.textContent;wp.a11y.speak(s),n.classList.add("visible")});let h=document.querySelectorAll(".reset-ableplayer");h!==null&&h.forEach(e=>{e.addEventListener("click",r);function r(n){let s=n.target,o=document.querySelectorAll(".ableplayer-generator-inputs input, .ableplayer-generator-inputs select");for(i=0;i<o.length;i++)switch(o[i].type){case"select-multiple":case"select-one":o[i].value=o[i].querySelector("option:first-of-type").getAttribute("value");break;case"text":case"email":case"date":case"url":case"search":case"textarea":o[i].value="";break;case"checkbox":case"radio":o[i].checked=!1;break}document.querySelectorAll(".ableplayer-shortcode-container").forEach(l=>{l.value="["+s.getAttribute("data-type")+"]"})}}),t(".media-sources").hide();let m=t("#source_type").val();t(".media-sources."+m).show(),t(".media-sources."+m).find("input:nth-of-type(1)").attr("required","true"),t("#source_type").on("change",function(e){let r=t(this).val();t(".media-sources").hide(),t(".media-sources").find("input").removeAttr("required"),t(".media-sources."+r).show(),t(".media-sources."+r).find("input:nth-of-type(1)").attr("required","true")});var d="";function q(){typeof d!="string"&&(d.detach(),d="")}t(".ableplayer-remove-preview").on("click",function(e){let r=t(this).data("input"),n=t(this).parent().parent(".ableplayer-media-preview");t("#"+r).val(""),t(".preview-"+r+" > *").remove(),n.removeClass("has-value"),wp.a11y.speak(ableplayer.removed)}),t(".upload-ableplayer-media").on("click",function(e){let r=t(this).data("input"),n=document.querySelector('input[name="'+r+'"]'),s=document.querySelector(".preview-"+r),o=t(this).parent().parent(".ableplayer-media-preview"),u;r==="media-id"||r==="media-desc-id"||r==="media-asl-id"?u=["audio","video"]:r==="poster"?u=["image"]:u=["text/vtt"],q(),d=wp.media({multiple:!1,title:ableplayer[r+"Title"],library:{type:u},button:{text:ableplayer.buttonName}}),d.on("select",function(){let l=d.state().get("selection"),c="",a="",p="",v="",k="";l&&(c=l.first().attributes.id,r==="poster"?(p=ableplayer.thumbHeight,v=Math.round(l.first().attributes.width/l.first().attributes.height*p),k=l.first().attributes.alt,a="<img id='event_image' src='"+l.first().attributes.url+"' width='"+v+"' height='"+p+"' alt='"+k+"' />",n.value=c,s.innerHTML=a):(s.innerHTML="<pre>"+l.first().attributes.url.replace(ableplayer.homeUrl,"")+"</pre>",n.value=c),o.addClass("has-value"))}),d.open()})});})();
